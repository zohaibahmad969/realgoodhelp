"use strict";const ROOTS=getComputedStyle(document.documentElement),HOVERTIME=getNumber(ROOTS.getPropertyValue("--hover-time")),CURRENCY=rlghData.currency;let isAnimated=!1;function popupInit(){document.querySelectorAll(".js-popup").forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),showPopup(e.dataset.popup)}))}function showPopup(e){if(isAnimated)return;isAnimated=!0,setTimeout(()=>isAnimated=!1,HOVERTIME);let t=document.querySelector(".popup.show");const o=document.querySelector(`.${e}__popup`),n=o.querySelector(".js-close-popup");function r(e){isAnimated||(isAnimated=!0,setTimeout(()=>isAnimated=!1,HOVERTIME),e.target.closest(".popup__body")&&!e.target.closest(".js-close-popup")||a(e.target.closest(".popup.show")))}function a(e){if(e.classList.contains("locked"))return;const t=e.querySelector(".js-close-popup");window.removeEventListener("click",r),t&&t.removeEventListener("click",r),o.classList.contains("video-popup")&&popupVideo(o,"pause"),o.classList.contains("ohterwebsite__popup")&&popupVideo(o,"pause"),unlockScroll(),e.classList.remove("show")}t?(a(t),setTimeout(()=>o.classList.add("show"),HOVERTIME)):(o.classList.add("show"),o.classList.contains("video-popup")&&popupVideo(o,"play")),lockScroll(),window.addEventListener("click",r),n&&n.addEventListener("click",r)}function popupVideo(e,t){e.querySelector(".video").contentWindow.postMessage(JSON.stringify({event:"command",func:t+"Video"}),"*")}function lockScroll(){document.querySelectorAll(".js-padding").forEach(e=>{const t=getNumber(window.getComputedStyle(e,null).getPropertyValue("padding-right"));e.style.paddingRight=getScrollWidth()+t+"px"}),document.documentElement.style.overflow="hidden"}function unlockScroll(){document.querySelectorAll(".js-padding").forEach(e=>{e.style.paddingRight=""}),document.documentElement.style.overflow=""}function reviewPopupInit(){const e=document.querySelector(".review__popup"),t=e.querySelector('input[name="therapist_id"]'),o=e.querySelector(".form");document.querySelector(".client-schedule__history").querySelectorAll(".client-schedule__button").forEach(e=>e.addEventListener("click",()=>{t.value=e.dataset.psycho})),o.addEventListener("submit",async e=>{e.preventDefault();const n=await sendForm(o,"review");n&&(n.success?(removeReviewButtons(t.value),showPopup("review-suc"),o.reset(),resetRating(o)):alert("Some error - please try again"))})}function removeReviewButtons(e){document.querySelectorAll(`.client-schedule__button[data-psycho="${e}"]`).forEach(e=>e.closest(".client-schedule__buttons").remove())}function ratingInit(){document.querySelector(".review__popup").querySelectorAll(".js-rating-star").forEach(e=>{const t=e.closest(".rating").nextElementSibling;e.addEventListener("mouseenter",()=>{t.classList.contains("set")||(t.style.width=100*e.dataset.num/5+"%")}),e.addEventListener("mouseleave",()=>{t.classList.contains("set")||(t.style.width="0%")}),e.addEventListener("click",()=>{const o=e.closest(".form__cell").querySelector(".input");t.style.width=100*e.dataset.num/5+"%",t.classList.add("set"),o.value=e.dataset.num,o.dispatchEvent(new Event("input"))})})}function resetRating(e){e.querySelectorAll(".rating__score").forEach(e=>{e.classList.remove("set"),e.style.width="0%"})}document.querySelector(".realgh-self-help-lp-bg-page")&&(document.querySelector(".header").classList.add("header-transparent"),document.querySelector(".header__logo img").setAttribute("src","http://www.realgoodhelp.com/wp-content/uploads/2023/03/main-logo-transparent.png"),window.addEventListener("scroll",(function(){window.scrollY>=100?(document.querySelector(".header").classList.add("header-white"),document.querySelector(".header").classList.remove("header-transparent"),document.querySelector(".header__logo img").setAttribute("src","http://www.realgoodhelp.com/wp-content/uploads/2023/01/logo.svg")):(document.querySelector(".header").classList.remove("header-white"),document.querySelector(".header").classList.add("header-transparent"),document.querySelector(".header__logo img").setAttribute("src","http://www.realgoodhelp.com/wp-content/uploads/2023/03/main-logo-transparent.png"))})),$(document).on("click",".main-lp-theme-box",(function(){let e=$(this);window.location.href=e.attr("data-cat-url")}))),void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js"),document.querySelector(".popup")&&popupInit(),document.querySelector(".client-schedule__history")&&reviewPopupInit(),document.querySelector(".review__popup")&&ratingInit();const AUTO_TIME=2e3;let slider_state=getDevice();function autoSliderInit(){const e=document.querySelector(".auto-slider");e.querySelector(".slider__tape");sliderFillPoints(e),e.count=0;let t=setInterval(()=>autoSliderSlide(e),2e3);e.querySelectorAll(".slider__point").forEach(t=>t.addEventListener("click",()=>autoSliderSlide(e,t.dataset.count))),e.addEventListener("mouseenter",()=>{clearInterval(t)}),e.addEventListener("mouseleave",()=>{t=setInterval(()=>autoSliderSlide(e),2e3)}),window.addEventListener("resize",()=>slidesCount(e))}function sliderFillPoints(e){const t=e.querySelectorAll(".slider__item"),o=e.querySelector(".slider__points"),n=+ROOTS.getPropertyValue("--main-slider-count");o.innerHTML="",e.pointsNum=Math.ceil(t.length/n);for(let t=0;t<e.pointsNum;t++)createPoint(o,t)}function createPoint(e,t){const o=document.createElement("div");o.className="slider__point",o.dataset.count=t,0==t&&o.classList.add("active"),e.append(o)}function updatePoints(e){const t=e.querySelector(".slider__points"),o=t.querySelectorAll(".slider__point");t.querySelector(".active").classList.remove("active"),o[e.count].classList.add("active")}function autoSliderSlide(e,t=null){const o=e.querySelector(".slider__tape");e.count=null==t?(e.count+1)%e.pointsNum:t,o.style.transform=`translateX(${100*-e.count}%)`,updatePoints(e)}function slidesCount(e){getDevice()!=slider_state&&(slider_state=getDevice(),sliderFillPoints(e))}function tabsInit(){document.querySelectorAll(".tabs").forEach(e=>{e.querySelectorAll(".tab").forEach(e=>e.addEventListener("input",()=>changeTab(e)))})}function changeTab(e){const t=e.closest(".tabs-container").querySelector(".tabs__content"),o=t.querySelector(".active"),n=e.dataset.tabItem;o&&o.classList.remove("active"),t.querySelector("#"+n).classList.add("active")}function rangeInit(){document.querySelectorAll(".input-range").forEach(e=>{const t=e.nextElementSibling.querySelector(".output__content");t.textContent=e.value,e.addEventListener("input",()=>t.textContent=e.value)})}function jsLinkInit(){document.querySelectorAll(".js-link").forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),window.location.href=e.dataset.href}))}function conditionalInit(){document.querySelectorAll(".check-condition").forEach(e=>{const t=e.closest(".form__cell").querySelector(".input");t.disabled=!e.checked,e.addEventListener("change",()=>t.disabled=!e.checked)})}function timetableInit(){document.querySelector(".timetable").querySelectorAll(".timetable__row").forEach(e=>{const t=e.querySelector(".check__input"),o=e.querySelector(".timetable__add-button");t.addEventListener("change",()=>{if(1==t.checked)addIntervalRow(e);else{e.querySelectorAll(".workhours__row").forEach(e=>removeIntervalRow(e))}}),o.addEventListener("click",()=>addIntervalRow(e)),e.addEventListener("click",e=>{if(!e.target.closest(".workhours__remove-button"))return;removeIntervalRow(e.target.closest(".workhours__row"))})})}function addIntervalRow(e){const t=e.closest(".timetable").querySelector("#workhours-temp").content,o=e.querySelector(".timetable__intervals"),n=e.querySelector(".check__input"),r=t.cloneNode(!0),a=r.querySelector(".workhours__start"),s=r.querySelector(".workhours__end");if(a.name="availability_hours["+n.value+"_int][]",s.name="availability_hours["+n.value+"_int][]",isWeekdayEmpty(e))o.innerHTML="",n.checked=!0;else{const t=e.querySelectorAll(".workhours__row"),[o,n]=parseTime(t[t.length-1].querySelector(".workhours__end").value);a.value=`${leadingZero(o)}:${leadingZero(n)}`,s.value=`${leadingZero((o+1)%24)}:${leadingZero(n)}`}o.append(r)}function removeIntervalRow(e){const t=e.closest(".timetable__row"),o=t.closest(".timetable"),n=t.querySelector(".timetable__intervals");if(e.remove(),isWeekdayEmpty(t)){const e=t.querySelector(".check__input"),r=document.createElement("p");r.className="text note",r.textContent=o.dataset.empty,n.append(r),e.checked=!1}}function isWeekdayEmpty(e){return!e.querySelectorAll(".workhours__row").length}document.querySelector(".auto-slider")&&autoSliderInit(),document.querySelector(".tabs-container")&&tabsInit(),document.querySelector(".input-range")&&rangeInit(),document.querySelector(".js-link")&&jsLinkInit(),document.querySelector(".check-condition")&&conditionalInit(),document.querySelector(".timetable")&&timetableInit();const HOUR_HEIGHT=getNumber(ROOTS.getPropertyValue("--calendar-cell-height")),PART_HEIGHT=HOUR_HEIGHT/6,PART_VALUE=10,YEARS=2,WEEKDAYS=["mon","tue","wed","thu","fri","sat","sun"];async function calendarInit(){const e=document.querySelector(".calendar"),t=(e.closest(".tab__item"),e.querySelector(".calendar__month"),e.querySelector(".calendar__year")),o=new FormData;o.append("id",e.dataset.psycho),o.append("action","calendar_data");const n=await fetch(rlghData.ajaxurl,{method:"POST",body:o}).then(e=>e.json()).then(e=>e.data);for(let e=0;e<2;e++){const o=document.createElement("option");o.setAttribute("value",(new Date).getFullYear()+e),o.appendChild(document.createTextNode((new Date).getFullYear()+e)),t.append(o)}if(n.intervals=JSON.parse(n.intervals),e.reservation=n.reservation,e.break=n.break,document.querySelector("#timezone")){const t=document.querySelector("#timezone");e.timezone=+t.value,t.addEventListener("change",()=>{e.timezone=+t.value;const o=e.querySelector(".calendar__day-block");let a=new Date(o.date);r=setCalendarTime(e,n),setCalendarDate(e,a),calendarSetup(e,n,r)})}else e.timezone=+n.timezone;let r=setCalendarTime(e,n);createCalendarCells(e);const a=new Date,s=a.getTimezoneOffset()+e.timezone;a.setMinutes(a.getMinutes()+s),setCalendarDate(e,a),calendarSetup(e,n,r),document.querySelector("#step-1")?bookingCalendarEvents(e):e.classList.contains("psycho")&&psychoCalendarEvents(e),generalCalendarEvents(e)}function setCalendarTime(e,t){const o=e.querySelector(".calendar__time-block");let n=null,r=new Set;for(let[o,a]of Object.entries(t.intervals))for(let t in a){const o=new Date,s=new Date,[c,l]=parseTime(a[t][0]),[i,u]=parseTime(a[t][1]);o.setHours(c,l+e.timezone,0,0),s.setHours(i,u+e.timezone,0,0),n||(n=o.getMinutes());const d=new Date(o);for(o>s&&s.setDate(s.getDate()+1);d.getTime()<s.getTime();)r.add(d.getHours()),d.setHours(d.getHours()+1)}return r=Array.from(r).sort((e,t)=>e-t),o.innerHTML="",r.forEach(e=>{const t=document.createElement("p");t.className="text fz-16 calendar__cell calendar__time",t.dataset.time=`${leadingZero(e)}:${leadingZero(n)}`,t.innerHTML=formatTime(e,n,"<br>"),o.append(t)}),r}function createCalendarCells(e){const t=e.querySelector(".calendar__time-block");e.querySelectorAll(".calendar__day-block").forEach(e=>{for(let o=0;o<t.childElementCount;o++){const t=document.createElement("div");t.className="calendar__cell",e.append(t)}})}function calendarSetup(e,t,o){const n=e.querySelector(".calendar__body").querySelectorAll(".calendar__day-block");let r=0;const a=n[0].date;n.forEach(e=>{e.querySelectorAll(".calendar__cell").forEach(e=>e.classList.add("disabled"))});for(let s of WEEKDAYS){const c=t.intervals[s+"_int"];if(c){for(let t in c){const s=new Date(a),l=new Date(a);s.setDate(s.getDate()+r),l.setDate(l.getDate()+r);const[i,u]=parseTime(c[t][0]),[d,m]=parseTime(c[t][1]);s.setHours(i,u+e.timezone,0,0),l.setHours(d,m+e.timezone,0,0);const p=new Date(s);for(s>l&&l.setDate(l.getDate()+1);p.getTime()<l.getTime();){n[(p.getDay()+6)%7].querySelectorAll(".calendar__cell")[o.indexOf(p.getHours())].classList.remove("disabled"),p.setHours(p.getHours()+1)}}r++}else r++}}function setCalendarDate(e,t){const o=e.querySelector(".calendar__body"),n=e.querySelector(".calendar__month"),r=e.querySelector(".calendar__year"),a=o.querySelector(".calendar__time-block").querySelectorAll(".calendar__time"),s=o.querySelectorAll(".calendar__day-block"),c=e.querySelector(".calendar__header").querySelectorAll(".calendar__day-header"),l=e.querySelector(".prev-button");n.value=t.getMonth(),r.value=t.getFullYear();const i=(t.getDay()+6)%7;t.setDate(t.getDate()-i);const u=new Date,d=u.getTimezoneOffset()+e.timezone;u.setMinutes(u.getMinutes()+d),u.setHours(u.getHours()+1+e.reservation);let m=0;s.forEach(e=>{const o=c[m].querySelector(".calendar__date"),n=e.querySelectorAll(".calendar__cell");let r=0;const s=new Date(t);s.setDate(s.getDate()+m),a.forEach(e=>{const[t,o]=parseTime(e.dataset.time);s.setHours(t,o,0,0),u>s?n[r].classList.add("past"):n[r].classList.remove("past"),r++}),e.dataset.date=s.getDate(),e.date=s,o.innerHTML=s.getDate(),m++}),o.querySelector(".past")?l.disabled=!0:l.disabled=!1,fillWeekSessions(e,t)}async function fillWeekSessions(e,t){const o=e.querySelector(".calendar__body");e.querySelector(".calendar__event.current")&&removeSessionCard(e);o.querySelectorAll(".calendar__event").forEach(e=>e.remove());const n=e.classList.contains("psycho")?"psycho":"client",r=new FormData;r.append("id",e.dataset.psycho),r.append("day",t.getDate()),r.append("month",t.getMonth()+1),r.append("year",t.getFullYear()),r.append("for",n),r.append("action","session_data");const a=await fetch(rlghData.ajaxurl,{method:"POST",body:r}).then(e=>e.json()).then(e=>e.data);for(let t of a){const r=new Date(t.date),[a,s]=parseTime(t.start);r.setHours(a,s+e.timezone,0,0),t.fullDate=new Date(r),createSessionCard(o,t,n)}setSessionWidth()}function createSessionCard(e,t,o){const n=e.closest(".calendar"),r=e.querySelector(`.calendar__day-block[data-date="${t.fullDate.getDate()}"]`);if(!r&&"psycho"==o)return;const a=e.querySelector("#session-temp").content.cloneNode(!0).querySelector(".calendar__event"),s=new Date(t.fullDate);if(s.setMinutes(s.getMinutes()+t.duration),"psycho"==o){const e=a.querySelector(".calendar__event-img"),o=a.querySelector(".calendar__event-name");a.href=t.url,a.name=t.name,a.date=`${leadingZero(t.fullDate.getDate())}-${leadingZero(t.fullDate.getMonth()+1)}-${t.fullDate.getFullYear()}`,a.method=uppFirstLetter(t.method),a.time=`${formatTime(t.fullDate.getHours(),t.fullDate.getMinutes())} - ${formatTime(s.getHours(),s.getMinutes())}`,e.src=t.img,o.textContent=t.name}else{a.querySelector(".calendar__event-time").textContent=formatTime(t.fullDate.getHours(),t.fullDate.getMinutes())+" - "+formatTime(s.getHours(),s.getMinutes())}if("client"==o&&a.classList.add("not-allow"),"current"==o&&a.classList.add("current"),"current"!=o&&(t.duration+=n.break),a.stTime=t.fullDate,a.duration=t.duration,!r)return a.style.display="none",void e.append(a);const c=t.duration/10;a.style.height=c*PART_HEIGHT+"px";const l=getSessionPosFromTime(e,t.fullDate.getHours(),t.fullDate.getMinutes());!1!==l&&(a.style.top=l+"px",r.prepend(a))}function removeSessionCard(e){e.querySelector(".calendar__event.current").remove();e.closest(".form").querySelector(".booking__calendar-fields").querySelectorAll("input").forEach(e=>e.value="")}function generalCalendarEvents(e){const t=e.querySelector(".prev-button"),o=e.querySelector(".next-button"),n=e.querySelector(".calendar__month"),r=e.querySelector(".calendar__year"),a=e.querySelector(".calendar__day-block");let s=new Date(a.date);t.addEventListener("click",()=>{s.setDate(s.getDate()-7),setCalendarDate(e,s)}),o.addEventListener("click",()=>{s.setDate(s.getDate()+7),setCalendarDate(e,s)}),n.addEventListener("change",()=>{s.setMonth(n.value),s.setDate(1),setCalendarDate(e,s)}),r.addEventListener("change",()=>{s.setFullYear(r.value),s.setMonth(n.value),s.setDate(1),setCalendarDate(e,s)})}function bookingCalendarEvents(e){const t=document.querySelector("#step-1"),o=t.querySelectorAll(".time_duration"),n=e.querySelector(".calendar__body"),r=e.querySelector(".calendar__table"),a=e.querySelector(".calendar__hint"),s={};o.forEach(e=>e.addEventListener("input",()=>{s.duration=+e.dataset.duration,r.querySelector(".calendar__event.current")&&removeSessionCard(r)})),r.addEventListener("mousemove",e=>{e.target.closest(".disabled, .calendar__event, .past")?a.classList.remove("show"):(s.duration||(s.duration=+t.querySelector("input:checked").dataset.duration),requestAnimationFrame(()=>{a.classList.add("show"),moveHint(e,s)}))}),r.addEventListener("mouseleave",()=>requestAnimationFrame(()=>a.classList.remove("show"))),r.addEventListener("click",t=>{if(t.target.closest(".disabled, .calendar__event, .past")||!isTimeAvailable(t,s.duration,e.break))return;const o=e.querySelector(".calendar__event.current");o&&o.remove();const r=t.target.closest(".calendar__column"),a=new Date(r.date),[c,l]=getSessionTimeFromPos(n,t.clientY);a.setHours(c,l,0,0),s.fullDate=new Date(a),createSessionCard(n,s,"current"),setSessionWidth();const i=document.querySelector(".booking__calendar-fields");a.setMinutes(a.getMinutes()-e.timezone),i.querySelector('input[name="session_date"]').value=`${a.getFullYear()}-${leadingZero(a.getMonth()+1)}-${leadingZero(a.getDate())}`,i.querySelector('input[name="session_start"]').value=leadingZero(a.getHours())+":"+leadingZero(a.getMinutes()),a.setMinutes(a.getMinutes()+s.duration),i.querySelector('input[name="session_end"]').value=leadingZero(a.getHours())+":"+leadingZero(a.getMinutes()),i.querySelector('input[name="session_duration"]').value=s.duration})}function psychoCalendarEvents(e){const t=e.querySelector(".calendar__body"),o=t.querySelector(".calendar__hint");t.querySelector(".calendar__table").addEventListener("mousemove",e=>{e.target.closest(".calendar__event")?psychoHint(t,e.target.closest(".calendar__event")):o.classList.remove("show")})}function moveHint(e,t){const o=e.target.closest(".calendar__body"),n=o.getBoundingClientRect(),r=o.closest(".calendar"),a=e.target.closest(".calendar__cell"),s=o.querySelector(".calendar__hint"),c=s.querySelector(".calendar-hint__text");if(!isTimeAvailable(e,t.duration,r.break))return a.classList.add("not-allow"),void s.classList.remove("show");a.classList.contains("not-allow")&&a.classList.remove("not-allow");const l=e.clientY-n.top,[i,u]=getSessionTimeFromPos(o,e.clientY),d=60*i+u+t.duration,m=Math.floor(d/60)%24,p=d%60;c.textContent=formatTime(i,u)+" - "+formatTime(m,p),s.style.top=l+"px",s.style.left=e.clientX-n.left-5+"px"}function psychoHint(e,t){const o=e.querySelector(".calendar__hint"),n=o.querySelector(".calendar-hint__name"),r=o.querySelectorAll(".calendar-hint__text");n.textContent=t.name,r[0].textContent=t.date,r[1].textContent=t.time,r[2].textContent=t.method;const a=o.getBoundingClientRect(),s=e.getBoundingClientRect(),c=t.getBoundingClientRect(),l=c.top-s.top,i=c.left-s.left;o.classList.remove("bottom","top","right"),s.bottom-c.bottom<a.height+10?(o.style.top=l-a.height-12+"px",o.style.left=i+"px",o.classList.add("top")):(o.style.top=l+c.height+12+"px",o.style.left=i+"px",o.classList.add("bottom")),i<a.width+10&&(o.style.left=i+c.width+"px",o.classList.add("right")),o.classList.add("show")}function setSessionWidth(){const e=document.querySelector(".calendar"),t=e.querySelector(".calendar__day-block");e.querySelectorAll(".calendar__event").forEach(e=>{e.style.width=t.clientWidth+"px"})}function getSessionTimeFromPos(e,t){const o=e.getBoundingClientRect(),n=e.querySelectorAll(".calendar__time"),r=t-o.top;let a,s=null;const c=new Date;return n.forEach(e=>{if(null!=s)return;const t=e.getBoundingClientRect().top-o.top;Math.floor(r-t)<=HOUR_HEIGHT&&([s,a]=parseTime(e.dataset.time),c.setHours(s,a+10*Math.floor(Math.abs(r-t)/PART_HEIGHT),0,0))}),[c.getHours(),c.getMinutes()]}function getSessionPosFromTime(e,t,o){const n=+e.querySelector(".calendar__time").dataset.time.split(":")[1];if(o<n){return getSessionPosFromTime(e,(t+23)%24,o+60)}const r=e.querySelector(`.calendar__time[data-time^="${leadingZero(t)}"]`);if(!r)return!1;let a=r.getBoundingClientRect().top-e.getBoundingClientRect().top;return a+=(o-n)/10*PART_HEIGHT,a}function isTimeAvailable(e,t,o){const n=e.target.closest(".calendar__column"),r=n.closest(".calendar__body"),a=r.querySelectorAll(".calendar__event.not-allow"),[s,c]=getSessionTimeFromPos(r,e.clientY),l=new Date(n.date);l.setHours(s,c,0,0);const i=new Date(l);i.setMinutes(i.getMinutes()+t+o);let u=!1;if(a.forEach(e=>{if(u)return;const t=new Date(e.stTime);t.setMinutes(t.getMinutes()+e.duration),l>t||i<e.stTime||(l<e.stTime&&i>e.stTime||l<t&&i>t)&&(u=!0)}),u)return!1;const d=getSessionPosFromTime(r,i.getHours(),i.getMinutes());if(!1===d&&!isThresholdTime(r,i))return!1;let m=d-getSessionPosFromTime(r,l.getHours(),l.getMinutes());m<0&&(m+=r.getBoundingClientRect().bottom+pageYOffset);const p=(t+o)/10*PART_HEIGHT;if(m<p)return!1;let h=e.target.closest(".calendar__cell");const[_,y]=getSessionTimeFromPos(r,h.getBoundingClientRect().top),g=new Date(l);for(g.setHours(_,y,0,0);g.getTime()<i;){if(h.classList.contains("disabled"))return!1;if(g.setHours(g.getHours()+1),h.nextElementSibling)h=h.nextElementSibling;else{if(!n.nextElementSibling)return!(e.clientY+p>r.getBoundingClientRect().bottom);h=n.nextElementSibling.querySelector(".calendar__cell")}}return!0}function isThresholdTime(e,t){const o=e.querySelector(`.calendar__time[data-time^="${leadingZero(t.getHours()-1)}"]`);if(!o)return!1;const[n,r]=parseTime(o.dataset.time),a=new Date(t);return a.setHours(n+1,r,0,0),t.getTime()<=a.getTime()}function dropdownInit(){document.querySelectorAll(".dropdown__container").forEach(e=>{const t=e.querySelector(".dropdown");e.addEventListener("mouseenter",()=>t.style.height=getRealHeight(t)+"px"),e.addEventListener("mouseleave",()=>t.style.height="0")})}function readmoreInit(){const e=document.querySelectorAll(".readmore__container");setReadmoreHeight(e),e.forEach(e=>{const t=e.querySelector(".readmore");e.querySelector(".readmore__cover").addEventListener("click",()=>readmoreAction(t))}),window.addEventListener("resize",()=>setReadmoreHeight(e))}function readmoreAction(e){e.classList.toggle("show"),e.classList.contains("show")?e.style.maxHeight=getRealHeight(e)+"px":e.style.maxHeight=getRealHeight(e,1)+"px"}function setReadmoreHeight(e){e.forEach(e=>{const t=e.querySelector(".readmore");t.classList.contains("show")?t.style.maxHeight=getRealHeight(t)+"px":t.style.maxHeight=getRealHeight(t,1)+"px"})}function stepsInit(){const e=document.querySelector(".steps"),t=e.querySelector("#questionariesForm"),o=e.querySelectorAll(".steps__button.next"),n=e.querySelectorAll(".steps__button.back");o.forEach(e=>e.addEventListener("click",o=>{o.preventDefault();const n=e.closest(".tab__item");formValidation(n)&&(t&&sendQuestionnaire(n,+e.dataset.step-1),changeStep(e.dataset.step))})),n.forEach(e=>e.addEventListener("click",()=>changeStep(e.dataset.step)))}function changeStep(e){const t=document.querySelector(".steps-nav__content"),o=document.querySelector(".steps");t.querySelector(".steps__nav-item.active").classList.remove("active"),t.querySelector(`#step-${e}-tab`).classList.add("active"),o.querySelector(".tab__item.active").classList.remove("active"),o.querySelector("#step-"+e).classList.add("active"),window.scrollTo(0,0)}async function sendQuestionnaire(e,t){const o=new FormData(e);if(e.querySelector(".input-file")){const t=e.querySelector(".input-file");o.append(t.name,t.files)}if(1!=t){const e=document.getElementById("email").value;o.append("email",e)}o.append("step",t),o.append("action","registerStepsWizardFrom"),5==t&&jQuery("#loader").show();const n=await fetch(rlghData.ajaxurl,{method:"POST",body:o}).then(e=>e.json()).then(e=>{if(5==t&&jQuery("#loader").hide(),!e.error)return jQuery(".errorMsg").removeClass("alert-error"),jQuery(".errorMsg").empty(),e.success;jQuery("html, body").animate({scrollTop:0},500),jQuery(".errorMsg").addClass("alert-error"),jQuery(".errorMsg").html(e.error)});5==t&&n&&showPopup("suc-reg")}function filterInit(){const e=document.querySelector(".filter"),t=e.querySelectorAll("input"),o=document.querySelector(".filter-popup__body"),n=o.querySelector(".js-close-popup"),r=o.querySelectorAll("input"),a=o.querySelector(".filter-popup__send-button"),s=o.querySelector(".filter-popup__clear-button");t.forEach(t=>t.addEventListener("change",()=>{filterOutTherapists(e),setSameFilterValue(o,t,"pop-"+t.name)})),r.forEach(t=>t.addEventListener("change",()=>{const o=t.name.replace("pop-","");setSameFilterValue(e,t,o)})),a.addEventListener("click",()=>{filterOutTherapists(e),n.click()}),s.addEventListener("click",()=>{e.reset(),o.reset(),filterOutTherapists(e),n.click()})}async function filterOutTherapists(e){const t=document.querySelector(".psycho__cards");t.classList.add("loading");const o=await sendForm(e,"filtration");o.success&&(filterTherapists(t,o.data),t.classList.remove("loading"))}function filterTherapists(e,t){const o=document.querySelector(".show-more__block"),n=o.querySelector(".psycho__cur-count"),r=o.querySelector(".psycho__glob-count");if(e.innerHTML="",t.response){n.textContent=0,r.textContent=0;const o=document.createElement("p");return o.className="subtitle ta-c",o.innerHTML=t.response,void e.append(o)}const a=document.querySelector("#psycho-card-temp").content;n.textContent=t.length,r.textContent=t.length,t.forEach(t=>{const o=a.cloneNode(!0).querySelector(".psycho__card");o.href=o.href+t.user_id,o.querySelector(".psycho-card__img").src=t.user_profile_pic,o.querySelectorAll(".psycho-card__30-rate").forEach(e=>{t.half_rate?e.textContent=t.half_rate+" "+CURRENCY:e.closest(".info__section").style.display="none"}),o.querySelectorAll(".psycho-card__60-rate").forEach(e=>{t.hourly_rate?e.textContent=t.hourly_rate+" "+CURRENCY:e.closest(".info__section").style.display="none"}),o.querySelectorAll(".money-back-btn").forEach(e=>e.style.display=+t.money_back_guarantee?"":"none"),o.querySelector(".js-link")&&o.querySelectorAll(".js-link").forEach(e=>e.dataset.href=e.dataset.href+t.user_id),o.querySelector(".psycho-card__name").textContent=t.first_name+" "+t.last_name,o.querySelector(".psycho-card__qual").textContent=t.qualification,o.querySelector(".psycho-card__exp").textContent=t.experience+" years",o.querySelector(".psycho-card__method").textContent=parseDBArrays(t.main_method)[0];const n=parseDBArrays(t.specialization),r=o.querySelector(".psycho-card__spec");n.forEach(e=>{const t=document.createElement("li");t.className="list__item text fz-14 fw-600 tt-ca",t.textContent=e,r.append(t)}),o.querySelector(".psycho-card__intro-text").textContent=t.about_myself;const s=o.querySelector(".tabs-container"),c=s.querySelector(".tab"),l=s.querySelector(".label"),i=s.querySelector(".tab__item");c.dataset.tabItem=c.dataset.tabItem+t.user_id,c.name=c.name+t.user_id,c.id=c.id+t.user_id,l.htmlFor=l.htmlFor+t.user_id,i.id=i.id+t.user_id,e.append(o)}),psychoCardsConnectEvent(e)}function psychoCardsConnectEvent(e){const t=e.querySelectorAll(".js-popup"),o=e.querySelectorAll(".js-link");t.forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),showPopup(e.dataset.popup)})),o.forEach(e=>e.addEventListener("click",t=>{t.preventDefault(),window.location.href=e.dataset.href}))}function parseDBArrays(e){let t=1;const o=e.split('"'),n=[];for(;o[t];)n.push(o[t]),t+=2;return n}function setSameFilterValue(e,t,o){const n=e.querySelectorAll(`.input[name="${o}"]`);let r=!1;n.forEach(e=>{r||e.value===t.value&&(e.checked=t.checked,r=!0)})}function editProfileInit(){const e=document.querySelector(".edit-prof__form");e.addEventListener("submit",t=>{if(t.preventDefault(),formValidation(e))$("#loader").show(),e.submit();else{const t=e.querySelector(".input.error, .input.empty").closest(".tab__item");if(!t||t.classList.contains("active"))return;e.querySelector(`#${t.id}-tab`).click()}})}function clientRequestInit(){const e=document.querySelector(".request__form");e.querySelector(".js-send-button").addEventListener("click",()=>sendClientRequest(e))}async function sendClientRequest(e){const t=await sendForm(e,"request");t&&(t.success?showPopup("suc-request"):alert("Some error. Please try again"))}function showSuccessMessage(e){const t=e.querySelector(".title"),o=document.createElement("p");o.className="text fw-600 success-message",o.textContent="Your request was submitted successfully",t.after(o)}function supportPopupInit(){const e=document.querySelector(".support__popup").querySelector(".form");e.addEventListener("submit",t=>sendSupportForm(t,e))}async function sendSupportForm(e,t){if(e.preventDefault(),!formValidation(t))return;const o=t.querySelector(".input-file"),n=new FormData(t);n.append("action","support");if(await fetch(rlghData.ajaxurl,{method:"POST",body:n}).then(e=>e.json()).then(e=>e.success)){sendMailToUser(t.querySelector('.input[type="email"]').value),showSuccessMessage(t),t.reset(),o.dispatchEvent(new Event("input"))}else alert("Some error - please try again")}function sendMailToUser(e){const t=new FormData;t.append("email",e),t.append("action","support_to_user"),fetch(rlghData.ajaxurl,{method:"POST",body:t})}function withdrawPopupInit(){const e=document.querySelector(".withdraw__popup").querySelector(".form"),t=e.querySelector(".input-text"),o=e.querySelector(".withdraw__max-amount");o&&o.addEventListener("click",()=>{t.value=parseFloat(o.textContent),t.dispatchEvent(new Event("input"))}),e.addEventListener("submit",t=>sendWithdrawForm(t,e))}async function sendWithdrawForm(e,t){if(e.preventDefault(),!formValidation(t))return;const o=new FormData(t);o.append("action","withdraw"),$("#loader").show();await fetch(rlghData.ajaxurl,{method:"POST",body:o}).then(e=>e.json()).then(e=>($("#loader").hide(),showPopup("withdraw-thankyou"),e.success))?t.reset():alert("Some error - please try again")}function resetPopupInit(){const e=document.querySelector(".reset-request__popup").querySelector(".reset-request__form");e.addEventListener("submit",t=>sendResetForm(t,e))}async function sendResetForm(e,t){if(e.preventDefault(),!formValidation(t))return;const o=new FormData(t);o.append("action","reset-pass");if(await fetch(rlghData.ajaxurl,{method:"POST",body:o}).then(e=>e.json()).then(e=>e.success)){const e=t.querySelector('input[type="email"]').value;document.querySelector(".reset-answer__popup").querySelector(".reset-popup__email").textContent=e,t.reset(),showPopup("reset-answer")}else alert("Some error - please try again")}function bookPopupInit(){document.querySelectorAll(".psycho-card__button").forEach(e=>e.addEventListener("click",()=>openBookPopup(e)))}function openBookPopup(e){document.querySelector(".book__popup").querySelector('input[name="id"]').setAttribute("value",e.dataset.psycho),showPopup("book")}function bookFormInit(){const e=document.querySelector(".book-popup__form");e.querySelector(".book-popup__button").addEventListener("click",t=>sendLetter(t,e))}function sendLetter(e,t){e.preventDefault();const o=t.querySelectorAll(".input");if(!formValidation(t))return;const n=new FormData;o.forEach(e=>{("radio"!=e.type||e.checked)&&n.append(e.name,e.value)}),n.append("action","booking"),fetch(rlghData.ajaxurl,{method:"POST",body:n}).then(t.reset()).catch(e=>{e.json().then(e=>{alert(e.message)})})}document.querySelector(".calendar")&&(calendarInit(),window.addEventListener("resize",()=>setSessionWidth())),document.querySelector(".dropdown__container")&&dropdownInit(),document.querySelector(".readmore")&&readmoreInit(),document.querySelector(".steps")&&stepsInit(),document.querySelector("#questionariesForm")&&document.querySelector("#submitFormTyrpiest").addEventListener("click",e=>{e.preventDefault();const t=e.target.closest(".tab__item");formValidation(t)&&sendQuestionnaire(t,5)}),document.querySelector(".filter")&&filterInit(),document.querySelector(".edit-prof__form")&&editProfileInit(),document.querySelector(".request__form")&&clientRequestInit(),document.querySelector(".support__popup")&&supportPopupInit(),document.querySelector(".withdraw__popup")&&withdrawPopupInit(),document.querySelector(".reset-request__popup")&&resetPopupInit(),document.querySelector(".psycho-card__button")&&bookPopupInit(),document.querySelector(".book-popup__form")&&bookFormInit();const ICONS_PATH=rlghData.themePath+"/assets/img/icons/";function fileUploadInit(){document.querySelectorAll(".form__select-file").forEach(e=>{const t=e.querySelector(".input-file");t.addEventListener("input",()=>uploadFiles(t))})}function uploadFiles(e){const t=e.closest(".form__select-file"),o=t.querySelector(".input-file--path"),n=t.querySelector(".form__file-content"),r=Array.from(e.files),a=[];n.innerHTML="",r.forEach(e=>{a.push(e.name);const o=createFileCard(t,e);n.append(o)}),o.value=a.join(),o.classList.add("filled"),o.dispatchEvent(new Event("input"))}function createFileCard(e,t){const o=e.querySelector(".temp__file-card").content.cloneNode(!0),n=o.querySelector(".file-card__media-block"),r=o.querySelector(".file-card__name"),a=o.querySelector(".file-card__size");return n.prepend(createCardsMedia(t)),r.textContent=t.name,a.textContent=getSizeFromBytes(t.size),o.querySelector(".file-card__button").addEventListener("click",removeFile),o}function removeFile(e){const t=e.target.closest(".file-card__button"),o=t.closest(".file__card, .single-file__card"),n=o.closest(".form__select-file"),r=n.querySelector(".input-file--path"),a=o.querySelector(".file-card__name").textContent,s=n.querySelector(".input-file");let c=new DataTransfer;const l=[];for(let e of s.files)e.name!=a&&(c.items.add(e),l.push(e.name));t.removeEventListener("click",removeFile),s.files=c.files,r.value=l.join(),o.remove(),s.files.length||r.classList.remove("filled")}function createCardsMedia(e){const t=getFileExtension(e.name);let o;switch(o="mp4"==t||"x-m4v"==t?createVideoMedia():createImageMedia(),o.src=ICONS_PATH,t){case"pdf":o.src+="pdf.svg";break;case"doc":case"docx":o.src+="doc.svg";break;case"jpeg":case"jpg":case"png":case"mp4":case"x-m4v":o.src=URL.createObjectURL(e)}return o}function createVideoMedia(){const e=document.createElement("video");return e.controls=!0,e.className="video",e}function createImageMedia(){const e=document.createElement("img");return e.className="img file-card__img",e.alt="File image",e}document.querySelector(".form__select-file")&&fileUploadInit();const PASS_LENGTH=8;function formValidation(e){const t=e.querySelectorAll(".req-field");let o=!0;return t.forEach(e=>{if(e.querySelector(".check__input")){const t=e.querySelectorAll(".check__input");return void(isCheckFieldsChecked(t)||(o=!1,t.forEach(e=>{e.classList.add("empty"),e.addEventListener("input",removeEmptyStateFromCheck)})))}const t=e.querySelector(".input");if(!t.value)return t.classList.add("empty"),o=!1,void t.addEventListener("input",removeErrorState);"email"!=t.type||validateEmail(t)||(o=!1),"password"!=t.type||validatePassword(t)||(o=!1)}),o}function validateEmail(e){if(!/\S+@\S+\.\S+/.test(e.value)){const t=document.createElement("p");return t.className="text fz-14 error-message",t.textContent="Please enter a valid email address",e.classList.add("error"),e.parentNode.append(t),e.addEventListener("input",removeErrorState),!1}return!0}function validatePassword(e){if(e.value.length<8){const t=document.createElement("p");return t.className="text fz-14 error-message",t.textContent="Please enter at least 8 characters",e.classList.add("error"),e.parentNode.append(t),e.addEventListener("input",removeErrorState),!1}return!0}function removeEmptyStateFromCheck(e){e.target.closest(".req-field").querySelectorAll(".check__input").forEach(e=>{e.classList.remove("empty"),e.removeEventListener("change",removeEmptyStateFromCheck)})}function removeErrorState(e){const t=e.target.closest(".input");t.classList.contains("error")?(t.parentNode.querySelector(".error-message").remove(),t.classList.remove("error")):t.classList.remove("empty"),t.removeEventListener("input",removeErrorState)}function isCheckFieldsChecked(e){let t=!1;return e.forEach(e=>{t||(t=e.checked)}),t}if($("#loginForm").click((function(e){e.preventDefault();var t=$("#ajaxLoginForm").validate({rules:{email:{required:!0,email:!0},password:"required"}});if(t.form(),t.valid(),jQuery(".errorMsg").html(""),jQuery(".successMsg").html(""),t.valid()){var o=$("#ajaxLoginForm").serialize();$("#loader").show(),$.ajax({method:"POST",url:rlghData.ajaxurl,data:{action:"manualUserLogin",data:o},dataType:"JSON"}).done((function(e){var t=e;!0!==t.loggedin?($("#loader").hide(),jQuery(".errorMsg").addClass("alert-error"),jQuery(".errorMsg").html(t.message)):setTimeout((function(){null!==getSavedLocalStorageDataFromDB("saved_lessons")&&window.localStorage.setItem("saved_lessons",getSavedLocalStorageDataFromDB("saved_lessons")),null!==getSavedLocalStorageDataFromDB("lessons_answer")&&window.localStorage.setItem("lessons_answer",getSavedLocalStorageDataFromDB("lessons_answer")),null!==getSavedLocalStorageDataFromDB("themes_suggest")&&window.localStorage.setItem("themes_suggest",getSavedLocalStorageDataFromDB("themes_suggest")),null!==getSavedLocalStorageDataFromDB("themes_added")&&window.localStorage.setItem("themes_added",getSavedLocalStorageDataFromDB("themes_added")),null!==getSavedLocalStorageDataFromDB("show_cards_tutorial")&&window.localStorage.setItem("show_cards_tutorial",getSavedLocalStorageDataFromDB("show_cards_tutorial")),null!==getSavedLocalStorageDataFromDB("questionaire_results")&&window.localStorage.setItem("questionaire_results",getSavedLocalStorageDataFromDB("questionaire_results")),window.location.href=window.location.href}),2e3)}))}})),document.querySelector("#prfilePic")){const e=document.querySelector("#prfilePic"),t=e.nextElementSibling,o=e.closest(".form__image-cell").querySelector(".form-image__info");e.addEventListener("input",()=>{const n=e.files[0];if(n&&getSizeFromBytes(n.size,"MB")<5){const e=new FileReader;e.addEventListener("load",()=>{document.querySelector("#userUplodaedPic").setAttribute("src",e.result),t.value=URL.createObjectURL(n),t.dispatchEvent(new Event("input")),o.classList.remove("error")}),e.readAsDataURL(n)}else t.value="",o.classList.add("error")})}$(".cus-counter").keyup((function(){var e=$(this).val().length,t=$("#current");$("#maximum"),$("#the-count");t.text(e)})),$(".cus-counter1").keyup((function(){var e=$(this).val().length,t=$("#current1");$("#maximum1"),$("#the-count");t.text(e)}));var bol=$("#form_special_wrap input:checkbox:checked").length>=8;$("#form_special_wrap input:checkbox").not(":checked").attr("disabled",bol),$("#form_special_wrap input:checkbox").click((function(){var e=$("#form_special_wrap input:checkbox:checked").length>=8;$("#form_special_wrap input:checkbox").not(":checked").attr("disabled",e)}));var today=new Date;function saveLessonInit(){const e=document.querySelector(".save-button");isLessonSaved(e),e.addEventListener("click",()=>saveLesson(e))}function saveLesson(e){if(e.classList.toggle("saved"),e.classList.contains("saved")){const t=window.localStorage.getItem("saved_lessons"),o=t?JSON.parse(t):[];o.push(e.dataset.lesson),window.localStorage.setItem("saved_lessons",JSON.stringify(o))}else{const t=window.localStorage.getItem("saved_lessons"),o=JSON.parse(t),n=o.findIndex(t=>t==e.dataset.lesson);o.splice(n,1),window.localStorage.setItem("saved_lessons",JSON.stringify(o))}$("body").hasClass("logged-in")&&saveLocalStorageDataToDB("saved_lessons")}function isLessonSaved(e){const t=window.localStorage.getItem("saved_lessons");-1!=(t?JSON.parse(t):[]).findIndex(t=>t==e.dataset.lesson)&&e.classList.add("saved")}function tunnelFormInit(){const e=document.querySelector(".tunnel__form"),t=e.querySelector(".tunnel__button");fillTunnelForm(e),t.addEventListener("click",()=>{saveLessonsAnswer(e),addSuggestions(e)}),isFormCompleted(e)}function fillTunnelForm(e){let t=window.localStorage.getItem("themes_suggest");const o=t?JSON.parse(t):{};t=window.localStorage.getItem("lessons_answer");const n=t?JSON.parse(t):{};for(const t in o){const n=e.querySelectorAll(`.radio[name="${t}"]`);if(!n.length)continue;n[0].closest(".form-question__variants2").dataset.answer;"yes"==o[t]?n[0].checked=!0:"no"==o[t]?n[1].checked=!0:"unknow"==o[t]&&(n[2].checked=!0)}for(const t in n){const o=e.querySelectorAll(`.radio[name="${t}"]`);o.length&&o.forEach(e=>{e.checked=e.value==n[t]})}}function addSuggestions(e){const t=e.querySelectorAll(".js-main-quest"),o=window.localStorage.getItem("themes_suggest"),n=o?JSON.parse(o):{};t.forEach(e=>{e.dataset.answer;const t=e.querySelector(".radio:checked"),o=t.value,r=t.name;"yes"==o?n[r]="yes":"no"==o?n[r]="no":"unknow"==o&&(n[r]="unknow")}),window.localStorage.setItem("themes_suggest",JSON.stringify(n)),$("body").hasClass("logged-in")&&saveLocalStorageDataToDB("themes_suggest")}function saveLessonsAnswer(e){const t=e.querySelectorAll(".js-sec-quest"),o=window.localStorage.getItem("lessons_answer"),n=o?JSON.parse(o):{};t.forEach(e=>{const t=e.querySelector(".radio:checked"),o=t.value,r=t.name;n[r]=o}),window.localStorage.setItem("lessons_answer",JSON.stringify(n)),$("body").hasClass("logged-in")&&saveLocalStorageDataToDB("lessons_answer")}function isFormCompleted(e){const t=e.querySelectorAll(".form-question__variants"),o=e.querySelectorAll(".radio"),n=e.querySelector(".tunnel__button");let r=checkTunnelForm(t);n.disabled=r,o.forEach(e=>e.addEventListener("change",()=>{r=checkTunnelForm(t),n.disabled=r}))}function checkTunnelForm(e){let t=!1;return e.forEach(e=>{e.querySelector(".radio:checked")||(t=!0)}),t}$(".datepicker_dob").datepicker({dateFormat:"yy-mm-dd",autoclose:!0,orientation:"top",endDate:today,maxDate:"today -1",changeMonth:!0,changeYear:!0,yearRange:"1940:2040"}),document.querySelector(".save-button")&&saveLessonInit(),document.querySelector(".tunnel__form")&&tunnelFormInit(),firebase.initializeApp({apiKey:"AIzaSyBCwBJ8w59UZSVe8cSus5s-2qiTi3J5aHQ",authDomain:"real-good-help-d42ac.firebaseapp.com",projectId:"real-good-help-d42ac",storageBucket:"real-good-help-d42ac.appspot.com",messagingSenderId:"194534504607",appId:"1:194534504607:web:d42817622c694fcc494aaa"});const messaging=firebase.messaging();function reminderInit(){const e=document.querySelector(".reminder__form"),t=e.querySelector(".readmore__add-button"),o=e.querySelectorAll(".reminder__remove-button"),n=e.querySelector(".tabs-container"),r=n.querySelector(".tabs").querySelectorAll(".tab"),a=n.querySelector(".tabs__content"),s=a.querySelector('.check__input[name="notifications"]');if(new URLSearchParams(window.location.search).has("success")&&showPopup("suc-reminder"),"granted"==Notification.permission){const e=s.closest(".tab__item");for(const t of e.children)t.style.display="none";s.checked=!0}t.addEventListener("click",()=>reminderAddRow(e)),o.forEach(e=>e.addEventListener("click",remiderRemoveRow)),r.forEach(e=>e.addEventListener("input",()=>{const t=a.querySelector(".req-field");t.classList.remove("req-field"),t.querySelector(".empty")&&t.querySelector(".empty").classList.remove("empty"),a.querySelector("#"+e.dataset.tabItem).classList.add("req-field")})),s.addEventListener("input",()=>messaging.requestPermission()),e.addEventListener("submit",t=>sendReminder(t,e))}function reminderAddRow(e){const t=e.querySelector(".reminder__fields"),o=t.querySelector("#reminder-temp").content.cloneNode(!0);o.querySelector(".reminder__remove-button").addEventListener("click",remiderRemoveRow),t.append(o)}async function remiderRemoveRow(e){const t=e.target.closest(".reminder__remove-button"),o=t.closest(".reminder__form-row"),n=o.closest(".reminder__fields"),r=o.querySelector('input[name="reminder_id[]"]').value;if(r){const e=new FormData;e.append("id",r),e.append("action","remove_reminder"),fetch(rlghData.ajaxurl,{method:"POST",body:e})}t.removeEventListener("click",remiderRemoveRow),o.remove();const a=n.querySelectorAll(".reminder__form-row");1==a.length&&a[0].querySelector(".reminder__remove-button").classList.add("single")}async function sendReminder(e,t){e.preventDefault();const o=t.querySelector('.check__input[name="notifications"]');if("granted"!=Notification.permission&&(o.checked=!1),!formValidation(t))return;document.querySelector("#loader").style.display="";const n=new FormData(t);if(n.get("timezone")||(n.set("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone),n.append("save_timezone",!0)),"push"==n.get("method")){const e=await messaging.requestPermission().then(()=>messaging.getToken());n.append("token",e)}n.append("action","reminder");const r=await fetch(rlghData.ajaxurl,{method:"POST",body:n}).then(e=>e.json()).then(e=>e);document.querySelector("#loader").style.display="none",r.success?$("body").hasClass("category")?showPopup("suc-reminder"):window.location.replace(window.location.href+"&success=true"):alert("Some error. Please try again")}if(messaging.onMessage(e=>{const t={body:e.notification.body,icon:e.notification.icon};if("granted"==Notification.permission){const o=new Notification(e.notification.title,t);o.addEventListener("click",t=>{t.preventDefault(),window.open(e.notification.click_action,"_blank"),o.close()})}}),document.querySelector(".reminder__form")&&reminderInit(),document.querySelector("#theme-temp")&&window.localStorage.getItem("themes_suggest")&&Object.keys(JSON.parse(window.localStorage.getItem("themes_suggest"))).length){const e=document.querySelector(".popup__theme-cards"),t=document.querySelector(".suggestion");let o=!0;const n=window.localStorage.getItem("themes_suggest"),r=JSON.parse(n);for(const t in r)"no"!=r[t]&&e.querySelector(`.theme__card[data-theme="${t}"]`)&&(isThemeExist(t,"current")||(insertTheme(t,"suggestion"),o=!1));o||t.classList.add("show")}if(document.querySelector("#theme-temp"))if(window.localStorage.getItem("themes_added")&&JSON.parse(window.localStorage.getItem("themes_added")).length){const e=document.querySelector(".current"),t=document.querySelector(".popup__theme-cards"),o=window.localStorage.getItem("themes_added");JSON.parse(o).forEach(e=>{t.querySelector(`.theme__card[data-theme="${e}"]`)&&(t.querySelector(`.theme__card[data-theme="${e}"]`).classList.add("checked"),insertTheme(e,"current"))}),e.classList.add("show"),document.querySelector(".za-goals-content").classList.remove("show")}else document.querySelector(".za-goals-content").classList.add("show");if(document.querySelector("#menu-menu-1")||document.querySelector("#menu-wellbeing_menu")){let e="";if(document.querySelector("#menu-menu-1")?"Self-Help"==document.querySelector("#menu-menu-1 :nth-child(3)").textContent&&(e=document.querySelector("#menu-menu-1 :nth-child(3)")):document.querySelector("#menu-wellbeing_menu")&&(e=document.querySelector("#menu-wellbeing_menu :nth-child(1)")),e){var setTimeToHide_ID,timeOutValue=400;const t=document.querySelector(".themes_popup_header");e.addEventListener("mouseover",(function(){t.classList.add("show"),setTimeToHide_ID&&(window.clearTimeout(setTimeToHide_ID),setTimeToHide_ID=0)})),t.addEventListener("mouseover",(function(e){setTimeToHide_ID&&(window.clearTimeout(setTimeToHide_ID),setTimeToHide_ID=0)})),e.addEventListener("mouseout",(function(){setTimeToHide_ID=window.setTimeout((function(){t.classList.remove("show")}),timeOutValue)})),t.addEventListener("mouseout",(function(){setTimeToHide_ID=window.setTimeout((function(){t.classList.remove("show")}),timeOutValue)}));const o=window.localStorage.getItem("themes_added"),n=JSON.parse(o),r=document.querySelector(".popup__theme-cards-header");null!==n&&n.forEach(e=>{r.querySelector(`.theme__card[data-theme="${e}"]`)&&r.querySelector(`.theme__card[data-theme="${e}"]`).classList.add("checked")});document.querySelector(".popup__theme-cards-header").querySelectorAll(".theme__card-header").forEach(e=>e.addEventListener("click",()=>{const t=e.dataset.theme;e.classList.toggle("checked"),e.classList.contains("checked")?addThemeToStorage(t):e.classList.add("checked"),window.location.href=e.dataset.catUrl}))}}function themeCardsInit(){const e=document.querySelector(".current"),t=document.querySelector(".suggestion"),o=e.querySelector(".theme__cards");document.querySelector(".popup__theme-cards").querySelectorAll(".theme__card").forEach(e=>e.addEventListener("click",()=>{const n=e.dataset.theme;e.classList.toggle("checked"),e.classList.contains("checked")?(insertTheme(n,"current"),addThemeToStorage(n),document.querySelector(".za-goals-content").classList.remove("show"),isThemeExist(n,"suggestion")&&t.querySelector(`.theme__readmore[data-theme="${n}"]`).remove()):(o.querySelector(`.theme__readmore[data-theme="${n}"]`).remove(),removeThemeFromStorage(n),isSuggestThemeExist(n)&&insertTheme(n,"suggestion")),$(".themes__popup").removeClass("show"),unlockScroll(),isCurrentEmpty(),isCurrentEmpty()?document.querySelector(".za-goals-content").classList.add("show"):document.querySelector(".za-goals-content").classList.remove("show")}))}function addThemeToStorage(e){const t=window.localStorage.getItem("themes_added"),o=t?JSON.parse(t):[];-1!==o.indexOf(e)||o.push(e),window.localStorage.setItem("themes_added",JSON.stringify(o)),$("body").hasClass("logged-in")&&saveLocalStorageDataToDB("themes_added")}function removeThemeFromStorage(e){const t=window.localStorage.getItem("themes_added"),o=JSON.parse(t),n=o.findIndex(t=>t==e);o.splice(n,1),window.localStorage.setItem("themes_added",JSON.stringify(o)),$("body").hasClass("logged-in")&&saveLocalStorageDataToDB("themes_added")}function isCurrentEmpty(){const e=document.querySelector(".current");document.querySelector(".themes__popup");return e.querySelector(".theme__readmore")?(e.classList.add("show"),!1):(e.classList.remove("show"),!0)}function isSuggestionEmpty(){const e=document.querySelector(".suggestion");return e.querySelector(".theme__readmore")?(e.classList.add("show"),!1):(e.classList.remove("show"),!0)}function insertTheme(e,t){const o=document.querySelector(".popup__theme-cards"),n=o.querySelector(`.theme__card[data-theme="${e}"]`),r=document.querySelector("."+t).querySelector(".theme__cards"),a=document.querySelector("#theme-temp"),s=a.content.querySelector(".theme__readmore"),c=a.content.querySelector(".bg-block"),l=a.content.querySelector(".theme__name"),i=a.content.querySelector(".blue-button"),u=n.querySelector(".img").src,d=n.querySelector(".theme__text").innerHTML;let m=n.dataset.catUrl;o.classList.contains("active")&&(m+="?tutorial=true"),s.dataset.theme=e,c.src=u,l.innerHTML=d,i.href=m;const p=a.content.cloneNode(!0);r.append(p)}function isThemeExist(e,t){return!!document.querySelector("."+t).querySelector(`.theme__readmore[data-theme="${e}"]`)}function isSuggestThemeExist(e){const t=window.localStorage.getItem("themes_suggest"),o=JSON.parse(t);let n=!1;for(const t in o)t==e&&"yes"==o[t]&&(n=!0);return n}function readMoreInit(){$(document).on("click",".show-readmore-content",(function(){var e=$(this);if(!e.parents("section").hasClass("my-strategies__content"))return window.location.href=e.parents(".theme__readmore").find(".za-theme-more-btn").attr("href"),!1;{const t=e.parents(".card").find(".readmore__button");t.toggleClass("show"),t.hasClass("show")?e.parents(".readmore").css("max-height","max-content"):e.parents(".readmore").css("max-height","")}}))}function tutorialInit(){let e,t;function o(){e.classList.contains("tutorial__button")||(e.classList.remove("active"),e.removeEventListener("click",o),t&&t.classList.remove("active")),e.dataset.step&&(t=document.querySelector(".tutorial__hint."+e.dataset.step),e=document.querySelector(".tutorial__item."+e.dataset.step),t&&t.classList.add("active"),e.classList.add("active"),e.addEventListener("click",o))}document.querySelectorAll(".tutorial__button").forEach(t=>{e=t,t.addEventListener("click",()=>o())})}async function fillLessons(){const e=document.querySelector(".my-strategies__content"),t=e.dataset.page,o=window.localStorage.getItem("saved_lessons"),n=o?JSON.parse(o):[];$(document).ready((function(){jQuery.ajax({type:"post",url:rlghData.ajaxurl,data:{action:"saved",lessons:n,page:t},success:function(t){e.innerHTML=t},error:function(){}})}))}if(document.querySelector(".popup__theme-cards")&&themeCardsInit(),$(document).on("click",".remove_theme__button",(function(){let e=$(this),t=e.parents(".theme__readmore").attr("data-theme");removeThemeFromStorage(t),e.parents(".theme__readmore").remove(),$('.theme__card[data-theme="'+t+'"]').removeClass("checked"),isCurrentEmpty(),isCurrentEmpty()?document.querySelector(".za-goals-content").classList.add("show"):document.querySelector(".za-goals-content").classList.remove("show")})),document.querySelector("#theme-temp")&&readMoreInit(),$(document).on("click",".za-counter-add",(function(){let e=$(this),t=parseInt(e.parents(".za-count-box").find(".za-counter-box-count").html())+1;e.parents(".za-count-box").find(".za-counter-box-count").html(t)})),$(document).on("click",".za-counter-minus",(function(){let e=$(this),t=parseInt(e.parents(".za-count-box").find(".za-counter-box-count").html())-1;-1!==t&&e.parents(".za-count-box").find(".za-counter-box-count").html(t)})),document.querySelector(".tutorial__button")&&tutorialInit(),document.querySelector(".my-strategies")&&fillLessons(),document.querySelector(".js-back")){document.querySelectorAll(".js-back").forEach(e=>e.addEventListener("click",()=>window.history.back()))}function sendSuggestionInit(){const e=document.querySelector(".suggestion__form");e.addEventListener("submit",t=>sendSuggestion(t,e))}async function sendSuggestion(e,t){e.preventDefault(),document.documentElement.classList.add("loading");const o=new FormData(t);o.append("action","suggestion"),fetch(rlghData.ajaxurl,{method:"POST",body:o}).then(e=>{t.reset()}).then(e=>{showPopup("success")}).then(e=>{document.documentElement.classList.remove("loading")}).catch(e=>{console.error("Error:",e)})}function getNumber(e){return+e.replace(/[^+\d]/g,"")}function getScrollWidth(){return window.innerWidth-document.documentElement.clientWidth}function getRealHeight(e,t=null){const o=e.children;let n=0,r=0,a=0;for(let e of o){if(t&&a>=t)break;n+=e.clientHeight,r&&(n+=e.getBoundingClientRect().top-r),r=e.getBoundingClientRect().bottom,a++}return n}function getDevice(){return innerWidth>1e3?"desktop":"mobile"}function getFileExtension(e){const t=e.split(".");return t[t.length-1]}function formatTime(e,t=0,o=""){let n="";if(0!=t&&(n=":"+leadingZero(t)),0==e)return`12${n}${o}am`;if(12==e)return`${e}${n}${o}pm`;return`${e%12}${n}${o}${e>12?"pm":"am"}`}function leadingZero(e){return("0"+e).slice(-2)}function parseTime(e){const t=e.replace(/\D/g,"");return[+t.slice(0,2),+t.slice(2,4)]}function uppFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function getSizeFromBytes(e,t=null){if(t)switch(t){case"KB":return+(e/=1024).toFixed(1);case"MB":return+(e/=Math.pow(1024,2)).toFixed(1);case"GB":return+(e/=Math.pow(1024,3)).toFixed(1)}return e<1024?e.toFixed(1)+" B":(e/=1024)<1024?e.toFixed(1)+" KB":(e/=1024)<1024?e.toFixed(1)+" MB":(e/=1024)<1024?e.toFixed(1)+" GB":void 0}function convertFormToJSON(e){return $(e).serializeArray().reduce((function(e,{name:t,value:o}){return e[t]=o,e}),{})}function totalPrice(){return(jQuery("#initPrice").html()-jQuery("#discountPrice").html()).toFixed(2)}async function sendForm(e,t){if(!formValidation(e))return!1;const o=new FormData(e);return o.append("action",t),await fetch(rlghData.ajaxurl,{method:"POST",body:o}).then(e=>e.json()).then(e=>e)}function initPayPalButton(){paypal.Buttons({style:{shape:"rect",color:"blue",layout:"vertical",label:"pay"},createOrder:function(e,t){return t.order.create({purchase_units:[{amount:{currency_code:rlghData.currency,value:1}}]})},onApprove:function(e,t){return t.order.capture().then((function(e){console.log("Capture result",e,JSON.stringify(e,null,2)),t.redirect("/thank-you/")}))},onError:function(e){actions.redirect("/cancel/")}}).render("#paypal-button-container")}if(document.querySelector(".suggestion__form")&&sendSuggestionInit(),$(".book_button_steps").click((function(){if(5==$(this).data("step")){var e=convertFormToJSON("#bookingForm"),t=e.type_price.split("#");console.log(e,t),jQuery("#commuMethodType").html(t[1]),jQuery("#initPrice").html(t[0]),jQuery("#commuMethodPeriod").html(t[2]),jQuery("#videoType").html(e.communication_method),jQuery("#totalPrice, #btnLblPrice").html(totalPrice());const u=+document.getElementById("timezone").value,d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var o=$("#session_date").val(),n=$("#session_start").val(),r=$("#session_end").val();const m=new Date(`${o}T${n}`),p=new Date(`${o}T${r}`);m.setMinutes(m.getMinutes()+u),p.setMinutes(p.getMinutes()+u);var a=m.getUTCMonth(),s=m.getUTCDay(),c=m.getUTCDate(),l=formatTime(m.getHours(),m.getMinutes()," "),i=formatTime(p.getHours(),p.getMinutes()," ");$("#fullDateFormate").html(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][s]+", "+d[a]+" "+c+", "+l+" - "+i)}})),$("#checkout-button").click((function(e){e.preventDefault();var t=convertFormToJSON("#bookingForm");jQuery.ajax({type:"post",dataType:"json",url:rlghData.ajaxurl,data:{action:"createSessionStripe",data:t},beforeSend:function(){$("#loader").show()},success:function(e){1==e.success?window.location.replace(e.message):($("#loader").hide(),alert(e.message))},error:function(){$("#loader").hide()}})})),$("input[name=payment_method]").change((function(){$("#smart-button-container").toggle(),$("#checkout-button").toggle()})),$(document).ready((function(){setTimeout(()=>{$("p.successMsg").remove()},5e3)})),document.getElementById("step-3_other")&&(document.getElementById("step-3_other").onchange=function(){document.getElementById("another_options").disabled=!this.checked}),document.getElementById("step-3_my_main_other")){const e=document.querySelectorAll('.check__input[name="main_method[]"]'),t=document.getElementById("step-3_my_main_other");e.forEach(e=>e.addEventListener("input",()=>{document.getElementById("other_main_method").disabled=!t.checked}))}function saveLocalStorageDataToDB(e){$("#loader").show(),$.ajax({method:"POST",url:rlghData.ajaxurl,data:{action:"user_save_progress",data_type:e,data:$.trim(window.localStorage.getItem(e))}}).done((function(e){console.log(e.data.response),$("#loader").hide()})).fail((function(e){console.log(e)}))}function getSavedLocalStorageDataFromDB(e){var t;return $.ajax({method:"POST",url:rlghData.ajaxurl,async:!1,data:{action:"user_get_saved_progress",data_type:e},dataType:"JSON"}).done((function(e){t=e.data.DB_data})).fail((function(e){console.log(e)})),t}function ifUserLoggedIn(){var e;return $.ajax({method:"POST",url:rlghData.ajaxurl,async:!1,data:{action:"check_user_logged_in"}}).done((function(t){e=t})).fail((function(e){console.log(e)})),e}$("[id^='cancel_session-']").click((function(){var e=$(this).attr("id");$(".js-yes-popup").attr("data-cancel-session-id",e)})),$(".js-yes-popup").click((function(){var e=$(this).attr("data-cancel-session-id"),t=$("#"+e).attr("data-client-id"),o=$("#"+e).attr("data-therapist-id"),n=$("#"+e).attr("data-cancelled-by"),r=$("#"+e).attr("data-session-id");$.ajax({method:"POST",url:rlghData.ajaxurl,data:{action:"session_cancel",payment_key:r,client_id:t,therapist_id:o,cancelled_by:n},beforeSend:function(){$("#loader").show()},dataType:"JSON",success:function(e){console.log(e),"Successfully Cancelled"==e.success&&window.location.reload()}})})),$(".js-redeem-btn").click((function(e){e.preventDefault();var t=$("#promo_field").val();console.log(t),t?($("#promo_field").css("border-color","#e8e8e8"),$.ajax({method:"POST",url:rlghData.ajaxurl,data:{action:"redeem_promo_code",coupon_code:t},beforeSend:function(){$("#loader").show()},dataType:"JSON",success:function(e){if($("#loader").hide(),e.error)alert(e.error),$("#promo_amount").val(""),$("#discountPrice").text("0.00"),$("#totalPrice").text($("#initPrice").text()),$("#btnLblPrice").text($("#initPrice").text());else if("Success"==e.success){var t=parseInt($("#initPrice").text()),o=parseInt(e.data.percentage_amount)*t/100,n=t-o,r=o+"#"+e.data.id;$("#promo_amount").val(r),$("#discountPrice").text(o),$("#totalPrice").text(n),$("#btnLblPrice").text(n)}}})):($("#promo_field").css("border-color","red"),$("#promo_amount").val(""),$("#discountPrice").text("0.00"),$("#totalPrice").text($("#initPrice").text()),$("#btnLblPrice").text($("#initPrice").text()))})),jQuery(document).ready((function(e){e("body").hasClass("logged-in")||!e("body").hasClass("category")&&!e("body").hasClass("page-template-template-my-strategies")||null!==window.localStorage.getItem("login_popup_showed")||(showPopup("login"),window.localStorage.setItem("login_popup_showed","yes"))}));

